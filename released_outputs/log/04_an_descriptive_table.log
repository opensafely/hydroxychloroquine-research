-------------------------------------------------------------------------------
      name:  <unnamed>
       log:  E:\analyses\hydroxychloroquine-research/output/log\04_an_descripti
> ve_table.log
  log type:  text
 opened on:  21 Jul 2020, 14:33:01

. 
. * Open Stata dataset
. use $Tempdir\analysis_dataset, clear

. 
. /* PROGRAMS TO AUTOMATE TABULATIONS==========================================
> =*/ 
. 
. *****************************************************************************
> ***
. * All below code from K Baskharan 
. * Generic code to output one row of table
. 
. cap prog drop generaterow

. program define generaterow
  1. syntax, variable(varname) condition(string) 
  2.         
.         cou
  3.         local overalldenom=r(N)
  4.         
.         qui sum `variable' if `variable' `condition'
  5.         file write tablecontent (r(max)) _tab
  6.         
.         cou if `variable' `condition'
  7.         local rowdenom = r(N)
  8.         local colpct = 100*(r(N)/`overalldenom')
  9.         file write tablecontent %9.0gc (`rowdenom')  (" (") %3.1f (`colpct
> ') (")") _tab
 10. 
.         cou if exposure == 0 
 11.         local rowdenom = r(N)
 12.         cou if exposure == 0 & `variable' `condition'
 13.         local pct = 100*(r(N)/`rowdenom') 
 14.         file write tablecontent %9.0gc (r(N)) (" (") %3.1f (`pct') (")") _
> tab
 15. 
.         cou if exposure == 1 
 16.         local rowdenom = r(N)
 17.         cou if exposure == 1 & `variable' `condition'
 18.         local pct = 100*(r(N)/`rowdenom')
 19.         file write tablecontent %9.0gc (r(N)) (" (") %3.1f  (`pct') (")") 
> _tab
 20. 
.         cou if exposure >= .
 21.         local rowdenom = r(N)
 22.         cou if exposure >= . & `variable' `condition'
 23.         local pct = 100*(r(N)/`rowdenom')
 24.         file write tablecontent %9.0gc (r(N)) (" (") %3.1f (`pct') (")") _
> n
 25.         
. end

. 
. /* Explanatory Notes 
> 
> defines a program (SAS macro/R function equivalent), generate row
> the syntax row specifies two inputs for the program: 
> 
>         a VARNAME which is your variable 
>         a CONDITION which is a string of some condition you impose 
>         
> the program counts if variable and condition and returns the counts
> column percentages are then automatically generated
> this is then written to the text file 'tablecontent' 
> the number followed by space, brackets, formatted pct, end bracket and then t
> ab
> 
> the format %3.1f specifies length of 3, followed by 1 dp. 
> 
> */ 
. 
. *****************************************************************************
> ***
. * Generic code to output one section (varible) within table (calls above)
. 
. cap prog drop tabulatevariable

. prog define tabulatevariable
  1. syntax, variable(varname) min(real) max(real) [missing]
  2. 
.         local lab: variable label `variable'
  3.         file write tablecontent ("`lab'") _n 
  4. 
.         forvalues varlevel = `min'/`max'{ 
  5.                 generaterow, variable(`variable') condition("==`varlevel'"
> )
  6.         }
  7.         
.         if "`missing'"!="" generaterow, variable(`variable') condition(">=.")
  8. 
. end

. 
. *****************************************************************************
> ***
. 
. /* Explanatory Notes 
> 
> defines program tabulate variable 
> syntax is : 
> 
>         - a VARNAME which you stick in variable 
>         - a numeric minimum 
>         - a numeric maximum 
>         - optional missing option, default value is . 
> 
> forvalues lowest to highest of the variable, manually set for each var
> run the generate row program for the level of the variable 
> if there is a missing specified, then run the generate row for missing vals
> 
> */ 
. 
. *****************************************************************************
> ***
. * Generic code to summarize a continous variable 
. 
. cap prog drop summarizevariable 

. prog define summarizevariable
  1. syntax, variable(varname) 
  2. 
.         local lab: variable label `variable'
  3.         file write tablecontent ("`lab'") _n 
  4.         
.         qui summarize `variable', d
  5.         file write tablecontent ("Median (IQR)") _tab 
  6.         file write tablecontent (r(p50)) (" (") (r(p25)) ("-") (r(p75)) ("
> )") _tab
  7.                                                         
.         qui summarize `variable' if exposure == 0, d
  8.         file write tablecontent (r(p50)) (" (") (r(p25)) ("-") (r(p75)) ("
> )") _tab
  9. 
.         qui summarize `variable' if exposure == 1, d
 10.         file write tablecontent (r(p50)) (" (") (r(p25)) ("-") (r(p75)) ("
> )") _tab
 11.         
.         qui summarize `variable' if exposure >= ., d
 12.         file write tablecontent (r(p50)) (" (") (r(p25)) ("-") (r(p75)) ("
> )") _n
 13.         
.         qui summarize `variable', d
 14.         file write tablecontent ("Mean (SD)") _tab 
 15.         file write tablecontent (r(mean)) (" (") (r(sd)) (")") _tab
 16.                                                         
.         qui summarize `variable' if exposure == 0, d
 17.         file write tablecontent (r(mean)) (" (") (r(sd)) (")") _tab
 18. 
.         qui summarize `variable' if exposure == 1, d
 19.         file write tablecontent (r(mean)) (" (") (r(sd)) (")") _tab
 20.         
.         qui summarize `variable' if exposure >= ., d
 21.         file write tablecontent (r(mean)) (" (") (r(sd))  (")") _n
 22.         
.         
.         qui summarize `variable', d
 23.         file write tablecontent ("Min, Max") _tab 
 24.         file write tablecontent (r(min)) (", ") (r(max)) ("") _tab
 25.                                                         
.         qui summarize `variable' if exposure == 0, d
 26.         file write tablecontent (r(min)) (", ") (r(max)) ("") _tab
 27. 
.         qui summarize `variable' if exposure == 1, d
 28.         file write tablecontent (r(min)) (", ") (r(max)) ("") _tab
 29.         
.         qui summarize `variable' if exposure >= ., d
 30.         file write tablecontent (r(min)) (", ") (r(max)) ("") _n
 31.         
. end

. 
. 
. /* INVOKE PROGRAMS FOR TABLE 1===============================================
> =*/ 
. 
. *Set up output file
. cap file close tablecontent

. file open tablecontent using $Tabfigdir/table1.txt, write text replace

. 
. file write tablecontent ("Table 1: Demographic and Clinical Characteristics")
>  _n

. 
. * Exposure labelled columns
. 
. local lab0: label exposure 0

. local lab1: label exposure 1

. local labu: label exposure .u

. 
. 
. file write tablecontent _tab ("Total")                                       
>              _tab ///
>                                                          ("`lab0'")          
>                                          _tab ///
>                                                          ("`lab1'")          
>                                      _tab ///
>                                                          ("`labu'")          
>                                              _n 

. 
. * DEMOGRAPHICS (more than one level, potentially missing) 
. 
. gen byte cons=1

. tabulatevariable, variable(cons) min(1) max(1) 
  194,286
  194,286
  163,774
  163,774
  30,512
  30,512
  0
  0

. file write tablecontent _n 

. 
. /* POPULATION */
. tabulatevariable, variable(population) min(0) max(1) 
  194,286
  167,554
  163,774
  143,879
  30,512
  23,675
  0
  0
  194,286
  26,732
  163,774
  19,895
  30,512
  6,837
  0
  0

. file write tablecontent _n 

. 
. /* SOCIO-DEMOGRAPHICS */
. tabulatevariable, variable(agegroup) min(1) max(6) 
  194,286
  13,686
  163,774
  11,411
  30,512
  2,275
  0
  0
  194,286
  19,411
  163,774
  15,809
  30,512
  3,602
  0
  0
  194,286
  37,019
  163,774
  30,403
  30,512
  6,616
  0
  0
  194,286
  45,635
  163,774
  37,669
  30,512
  7,966
  0
  0
  194,286
  49,115
  163,774
  41,988
  30,512
  7,127
  0
  0
  194,286
  29,420
  163,774
  26,494
  30,512
  2,926
  0
  0

. file write tablecontent _n 

. 
. summarizevariable, variable(age)

. file write tablecontent _n 

. 
. tabulatevariable, variable(male) min(0) max(1) 
  194,286
  138,203
  163,774
  114,902
  30,512
  23,301
  0
  0
  194,286
  56,083
  163,774
  48,872
  30,512
  7,211
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(ethnicity) min(1) max(5) missing 
  194,286
  132,436
  163,774
  112,143
  30,512
  20,293
  0
  0
  194,286
  10,476
  163,774
  8,485
  30,512
  1,991
  0
  0
  194,286
  2,997
  163,774
  2,425
  30,512
  572
  0
  0
  194,286
  1,286
  163,774
  1,011
  30,512
  275
  0
  0
  194,286
  1,827
  163,774
  1,500
  30,512
  327
  0
  0
  194,286
  45,264
  163,774
  38,210
  30,512
  7,054
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(imd) min(1) max(5) missing
  194,286
  38,912
  163,774
  32,904
  30,512
  6,008
  0
  0
  194,286
  39,367
  163,774
  33,293
  30,512
  6,074
  0
  0
  194,286
  38,846
  163,774
  32,731
  30,512
  6,115
  0
  0
  194,286
  38,384
  163,774
  32,321
  30,512
  6,063
  0
  0
  194,286
  38,777
  163,774
  32,525
  30,512
  6,252
  0
  0
  194,286
  0
  163,774
  0
  30,512
  0
  0
  0

. file write tablecontent _n 

. 
. // tabulatevariable, variable(residence_type) min(1) max(8) missing 
. // file write tablecontent _n 
. 
. tabulatevariable, variable(urban) min(0) max(1) missing 
  194,286
  45,401
  163,774
  38,089
  30,512
  7,312
  0
  0
  194,286
  148,885
  163,774
  125,685
  30,512
  23,200
  0
  0
  194,286
  0
  163,774
  0
  30,512
  0
  0
  0

. file write tablecontent _n 

. 
. /* HEALTH BEHAVIOURS */
. tabulatevariable, variable(bmicat) min(1) max(6) missing
  194,286
  4,467
  163,774
  3,793
  30,512
  674
  0
  0
  194,286
  57,201
  163,774
  48,237
  30,512
  8,964
  0
  0
  194,286
  61,730
  163,774
  52,533
  30,512
  9,197
  0
  0
  194,286
  35,177
  163,774
  29,512
  30,512
  5,665
  0
  0
  194,286
  15,035
  163,774
  12,395
  30,512
  2,640
  0
  0
  194,286
  7,697
  163,774
  6,136
  30,512
  1,561
  0
  0
  194,286
  12,979
  163,774
  11,168
  30,512
  1,811
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(obese4cat) min(1) max(4) missing
  194,286
  136,377
  163,774
  115,731
  30,512
  20,646
  0
  0
  194,286
  35,177
  163,774
  29,512
  30,512
  5,665
  0
  0
  194,286
  15,035
  163,774
  12,395
  30,512
  2,640
  0
  0
  194,286
  7,697
  163,774
  6,136
  30,512
  1,561
  0
  0
  194,286
  0
  163,774
  0
  30,512
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(smoke) min(1) max(3) missing 
  194,286
  74,060
  163,774
  62,602
  30,512
  11,458
  0
  0
  194,286
  92,247
  163,774
  77,586
  30,512
  14,661
  0
  0
  194,286
  27,369
  163,774
  23,042
  30,512
  4,327
  0
  0
  194,286
  610
  163,774
  544
  30,512
  66
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(smoke_nomiss) min(1) max(3) missing 
  194,286
  74,670
  163,774
  63,146
  30,512
  11,524
  0
  0
  194,286
  92,247
  163,774
  77,586
  30,512
  14,661
  0
  0
  194,286
  27,369
  163,774
  23,042
  30,512
  4,327
  0
  0
  194,286
  0
  163,774
  0
  30,512
  0
  0
  0

. file write tablecontent _n 

. 
. /* COMORBIDITY */
. tabulatevariable, variable(diabcat) min(1) max(4) missing
  194,286
  159,550
  163,774
  133,724
  30,512
  25,826
  0
  0
  194,286
  24,808
  163,774
  21,329
  30,512
  3,479
  0
  0
  194,286
  9,364
  163,774
  8,262
  30,512
  1,102
  0
  0
  194,286
  564
  163,774
  459
  30,512
  105
  0
  0
  194,286
  0
  163,774
  0
  30,512
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(egfr_cat) min(1) max(3) missing 
  194,286
  127,224
  163,774
  104,205
  30,512
  23,019
  0
  0
  194,286
  23,808
  163,774
  20,511
  30,512
  3,297
  0
  0
  194,286
  1,887
  163,774
  1,648
  30,512
  239
  0
  0
  194,286
  41,367
  163,774
  37,410
  30,512
  3,957
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(egfr_cat_nomiss) min(1) max(3) missing 
  194,286
  168,591
  163,774
  141,615
  30,512
  26,976
  0
  0
  194,286
  23,808
  163,774
  20,511
  30,512
  3,297
  0
  0
  194,286
  1,887
  163,774
  1,648
  30,512
  239
  0
  0
  194,286
  0
  163,774
  0
  30,512
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(chronic_cardiac_disease) min(0) max(1) missing 
  194,286
  163,738
  163,774
  137,534
  30,512
  26,204
  0
  0
  194,286
  30,548
  163,774
  26,240
  30,512
  4,308
  0
  0
  194,286
  0
  163,774
  0
  30,512
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(chronic_liver_disease) min(0) max(1) missing 
  194,286
  191,577
  163,774
  161,554
  30,512
  30,023
  0
  0
  194,286
  2,709
  163,774
  2,220
  30,512
  489
  0
  0
  194,286
  0
  163,774
  0
  30,512
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(resp_excl_asthma) min(0) max(1) missing 
  194,286
  167,662
  163,774
  141,665
  30,512
  25,997
  0
  0
  194,286
  26,624
  163,774
  22,109
  30,512
  4,515
  0
  0
  194,286
  0
  163,774
  0
  30,512
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(neuro_conditions) min(0) max(1) missing 
  194,286
  181,590
  163,774
  152,793
  30,512
  28,797
  0
  0
  194,286
  12,696
  163,774
  10,981
  30,512
  1,715
  0
  0
  194,286
  0
  163,774
  0
  30,512
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(hypertension) min(0) max(1) missing 
  194,286
  111,048
  163,774
  92,805
  30,512
  18,243
  0
  0
  194,286
  83,238
  163,774
  70,969
  30,512
  12,269
  0
  0
  194,286
  0
  163,774
  0
  30,512
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(diabetes) min(0) max(1) missing 
  194,286
  159,550
  163,774
  133,724
  30,512
  25,826
  0
  0
  194,286
  34,736
  163,774
  30,050
  30,512
  4,686
  0
  0
  194,286
  0
  163,774
  0
  30,512
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(cancer_ever) min(0) max(1) missing 
  194,286
  174,304
  163,774
  146,666
  30,512
  27,638
  0
  0
  194,286
  19,982
  163,774
  17,108
  30,512
  2,874
  0
  0
  194,286
  0
  163,774
  0
  30,512
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(immunodef_any) min(0) max(1) missing 
  194,286
  191,320
  163,774
  161,378
  30,512
  29,942
  0
  0
  194,286
  2,966
  163,774
  2,396
  30,512
  570
  0
  0
  194,286
  0
  163,774
  0
  30,512
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(flu_vaccine) min(0) max(1) missing 
  194,286
  72,230
  163,774
  62,863
  30,512
  9,367
  0
  0
  194,286
  122,056
  163,774
  100,911
  30,512
  21,145
  0
  0
  194,286
  0
  163,774
  0
  30,512
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(pneumococcal_vaccine) min(0) max(1) missing 
  194,286
  161,277
  163,774
  137,512
  30,512
  23,765
  0
  0
  194,286
  33,009
  163,774
  26,262
  30,512
  6,747
  0
  0
  194,286
  0
  163,774
  0
  30,512
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(gp_consult) min(0) max(1) missing 
  194,286
  8,776
  163,774
  8,245
  30,512
  531
  0
  0
  194,286
  185,510
  163,774
  155,529
  30,512
  29,981
  0
  0
  194,286
  0
  163,774
  0
  30,512
  0
  0
  0

. file write tablecontent _n 

. 
. summarizevariable, variable(gp_consult_count)

. file write tablecontent _n 

. 
. file write tablecontent _n _n

. 
. ** TREATMENT VARIABLES (binary)
. foreach treat of varlist        hcq                     ///
>                                                         dmard_pc             
>    ///
>                                                         azith                
>    ///
>                                                         oral_prednisolone ///
>                                                         nsaids               
>    ///
>                                                         hcq_sa               
>    ///
>                                                         dmard_pc_sa     ///
>                                                         /********************
> ************************************   TO DO: ADD BIOLOGICS WHEN AVAILABLE***
> ***/ ///
>                                                 {               
  2. 
. local lab: variable label `treat'
  3. file write tablecontent ("`lab'") _n 
  4.         
. generaterow, variable(`treat') condition("==0")
  5. generaterow, variable(`treat') condition("==1")
  6. generaterow, variable(`treat') condition("==.")
  7. 
. file write tablecontent _n
  8. 
. }
  194,286
  163,774
  163,774
  163,774
  30,512
  0
  0
  0
  194,286
  30,512
  163,774
  0
  30,512
  30,512
  0
  0
  194,286
  0
  163,774
  0
  30,512
  0
  0
  0
  194,286
  122,914
  163,774
  108,114
  30,512
  14,800
  0
  0
  194,286
  71,372
  163,774
  55,660
  30,512
  15,712
  0
  0
  194,286
  0
  163,774
  0
  30,512
  0
  0
  0
  194,286
  193,339
  163,774
  163,024
  30,512
  30,315
  0
  0
  194,286
  947
  163,774
  750
  30,512
  197
  0
  0
  194,286
  0
  163,774
  0
  30,512
  0
  0
  0
  194,286
  160,685
  163,774
  137,042
  30,512
  23,643
  0
  0
  194,286
  33,601
  163,774
  26,732
  30,512
  6,869
  0
  0
  194,286
  0
  163,774
  0
  30,512
  0
  0
  0
  194,286
  161,015
  163,774
  137,148
  30,512
  23,867
  0
  0
  194,286
  33,271
  163,774
  26,626
  30,512
  6,645
  0
  0
  194,286
  0
  163,774
  0
  30,512
  0
  0
  0
  194,286
  163,647
  163,774
  162,302
  30,512
  1,345
  0
  0
  194,286
  30,639
  163,774
  1,472
  30,512
  29,167
  0
  0
  194,286
  0
  163,774
  0
  30,512
  0
  0
  0
  194,286
  123,196
  163,774
  108,252
  30,512
  14,944
  0
  0
  194,286
  71,090
  163,774
  55,522
  30,512
  15,568
  0
  0
  194,286
  0
  163,774
  0
  30,512
  0
  0
  0

. 
. 
. file close tablecontent

. 
. 
. 
. 
. 
. 
. 
. /* INVOKE PROGRAMS FOR TABLE 1 (RA only)=====================================
> ===*/ 
. 
. preserve 

. keep if population == 0
(26,732 observations deleted)

. 
. *Set up output file
. cap file close tablecontent

. file open tablecontent using $Tabfigdir/table1_ra.txt, write text replace

. 
. file write tablecontent ("Table 1: Demographic and Clinical Characteristics, 
> RA population") _n

. 
. * Exposure labelled columns
. 
. local lab0: label exposure 0

. local lab1: label exposure 1

. local labu: label exposure .u

. 
. 
. file write tablecontent _tab ("Total")                                       
>              _tab ///
>                                                          ("`lab0'")          
>                                          _tab ///
>                                                          ("`lab1'")          
>                                      _tab ///
>                                                          ("`labu'")          
>                                              _n 

. 
. * DEMOGRAPHICS (more than one level, potentially missing) 
. drop cons

. gen byte cons=1

. tabulatevariable, variable(cons) min(1) max(1) 
  167,554
  167,554
  143,879
  143,879
  23,675
  23,675
  0
  0

. file write tablecontent _n 

. 
. /* POPULATION */
. tabulatevariable, variable(population) min(0) max(1) 
  167,554
  167,554
  143,879
  143,879
  23,675
  23,675
  0
  0
  167,554
  0
  143,879
  0
  23,675
  0
  0
  0

. file write tablecontent _n 

. 
. /* SOCIO-DEMOGRAPHICS */
. tabulatevariable, variable(agegroup) min(1) max(6) 
  167,554
  10,068
  143,879
  8,938
  23,675
  1,130
  0
  0
  167,554
  15,087
  143,879
  12,804
  23,675
  2,283
  0
  0
  167,554
  30,864
  143,879
  25,980
  23,675
  4,884
  0
  0
  167,554
  39,973
  143,879
  33,408
  23,675
  6,565
  0
  0
  167,554
  44,373
  143,879
  38,179
  23,675
  6,194
  0
  0
  167,554
  27,189
  143,879
  24,570
  23,675
  2,619
  0
  0

. file write tablecontent _n 

. 
. summarizevariable, variable(age)

. file write tablecontent _n 

. 
. tabulatevariable, variable(male) min(0) max(1) 
  167,554
  116,197
  143,879
  99,053
  23,675
  17,144
  0
  0
  167,554
  51,357
  143,879
  44,826
  23,675
  6,531
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(ethnicity) min(1) max(5) missing 
  167,554
  115,628
  143,879
  99,538
  23,675
  16,090
  0
  0
  167,554
  8,492
  143,879
  7,066
  23,675
  1,426
  0
  0
  167,554
  1,984
  143,879
  1,690
  23,675
  294
  0
  0
  167,554
  884
  143,879
  727
  23,675
  157
  0
  0
  167,554
  1,346
  143,879
  1,162
  23,675
  184
  0
  0
  167,554
  39,220
  143,879
  33,696
  23,675
  5,524
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(imd) min(1) max(5) missing
  167,554
  33,391
  143,879
  28,744
  23,675
  4,647
  0
  0
  167,554
  33,863
  143,879
  29,150
  23,675
  4,713
  0
  0
  167,554
  33,608
  143,879
  28,789
  23,675
  4,819
  0
  0
  167,554
  33,224
  143,879
  28,536
  23,675
  4,688
  0
  0
  167,554
  33,468
  143,879
  28,660
  23,675
  4,808
  0
  0
  167,554
  0
  143,879
  0
  23,675
  0
  0
  0

. file write tablecontent _n 

. 
. // tabulatevariable, variable(residence_type) min(1) max(8) missing 
. // file write tablecontent _n 
. 
. tabulatevariable, variable(urban) min(0) max(1) missing 
  167,554
  39,353
  143,879
  33,632
  23,675
  5,721
  0
  0
  167,554
  128,201
  143,879
  110,247
  23,675
  17,954
  0
  0
  167,554
  0
  143,879
  0
  23,675
  0
  0
  0

. file write tablecontent _n 

. 
. /* HEALTH BEHAVIOURS */
. tabulatevariable, variable(bmicat) min(1) max(6) missing
  167,554
  3,808
  143,879
  3,299
  23,675
  509
  0
  0
  167,554
  48,391
  143,879
  41,621
  23,675
  6,770
  0
  0
  167,554
  54,031
  143,879
  46,685
  23,675
  7,346
  0
  0
  167,554
  30,957
  143,879
  26,488
  23,675
  4,469
  0
  0
  167,554
  13,202
  143,879
  11,127
  23,675
  2,075
  0
  0
  167,554
  6,742
  143,879
  5,499
  23,675
  1,243
  0
  0
  167,554
  10,423
  143,879
  9,160
  23,675
  1,263
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(obese4cat) min(1) max(4) missing
  167,554
  116,653
  143,879
  100,765
  23,675
  15,888
  0
  0
  167,554
  30,957
  143,879
  26,488
  23,675
  4,469
  0
  0
  167,554
  13,202
  143,879
  11,127
  23,675
  2,075
  0
  0
  167,554
  6,742
  143,879
  5,499
  23,675
  1,243
  0
  0
  167,554
  0
  143,879
  0
  23,675
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(smoke) min(1) max(3) missing 
  167,554
  62,957
  143,879
  54,547
  23,675
  8,410
  0
  0
  167,554
  81,133
  143,879
  69,230
  23,675
  11,903
  0
  0
  167,554
  22,985
  143,879
  19,663
  23,675
  3,322
  0
  0
  167,554
  479
  143,879
  439
  23,675
  40
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(smoke_nomiss) min(1) max(3) missing 
  167,554
  63,436
  143,879
  54,986
  23,675
  8,450
  0
  0
  167,554
  81,133
  143,879
  69,230
  23,675
  11,903
  0
  0
  167,554
  22,985
  143,879
  19,663
  23,675
  3,322
  0
  0
  167,554
  0
  143,879
  0
  23,675
  0
  0
  0

. file write tablecontent _n 

. 
. /* COMORBIDITY */
. tabulatevariable, variable(diabcat) min(1) max(4) missing
  167,554
  136,438
  143,879
  116,675
  23,675
  19,763
  0
  0
  167,554
  22,132
  143,879
  19,235
  23,675
  2,897
  0
  0
  167,554
  8,497
  143,879
  7,560
  23,675
  937
  0
  0
  167,554
  487
  143,879
  409
  23,675
  78
  0
  0
  167,554
  0
  143,879
  0
  23,675
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(egfr_cat) min(1) max(3) missing 
  167,554
  112,481
  143,879
  94,070
  23,675
  18,411
  0
  0
  167,554
  21,389
  143,879
  18,635
  23,675
  2,754
  0
  0
  167,554
  1,584
  143,879
  1,410
  23,675
  174
  0
  0
  167,554
  32,100
  143,879
  29,764
  23,675
  2,336
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(egfr_cat_nomiss) min(1) max(3) missing 
  167,554
  144,581
  143,879
  123,834
  23,675
  20,747
  0
  0
  167,554
  21,389
  143,879
  18,635
  23,675
  2,754
  0
  0
  167,554
  1,584
  143,879
  1,410
  23,675
  174
  0
  0
  167,554
  0
  143,879
  0
  23,675
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(chronic_cardiac_disease) min(0) max(1) missing 
  167,554
  140,361
  143,879
  120,221
  23,675
  20,140
  0
  0
  167,554
  27,193
  143,879
  23,658
  23,675
  3,535
  0
  0
  167,554
  0
  143,879
  0
  23,675
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(chronic_liver_disease) min(0) max(1) missing 
  167,554
  165,450
  143,879
  142,097
  23,675
  23,353
  0
  0
  167,554
  2,104
  143,879
  1,782
  23,675
  322
  0
  0
  167,554
  0
  143,879
  0
  23,675
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(resp_excl_asthma) min(0) max(1) missing 
  167,554
  143,685
  143,879
  123,846
  23,675
  19,839
  0
  0
  167,554
  23,869
  143,879
  20,033
  23,675
  3,836
  0
  0
  167,554
  0
  143,879
  0
  23,675
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(neuro_conditions) min(0) max(1) missing 
  167,554
  156,679
  143,879
  134,254
  23,675
  22,425
  0
  0
  167,554
  10,875
  143,879
  9,625
  23,675
  1,250
  0
  0
  167,554
  0
  143,879
  0
  23,675
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(hypertension) min(0) max(1) missing 
  167,554
  93,844
  143,879
  80,063
  23,675
  13,781
  0
  0
  167,554
  73,710
  143,879
  63,816
  23,675
  9,894
  0
  0
  167,554
  0
  143,879
  0
  23,675
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(diabetes) min(0) max(1) missing 
  167,554
  136,438
  143,879
  116,675
  23,675
  19,763
  0
  0
  167,554
  31,116
  143,879
  27,204
  23,675
  3,912
  0
  0
  167,554
  0
  143,879
  0
  23,675
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(cancer_ever) min(0) max(1) missing 
  167,554
  149,994
  143,879
  128,675
  23,675
  21,319
  0
  0
  167,554
  17,560
  143,879
  15,204
  23,675
  2,356
  0
  0
  167,554
  0
  143,879
  0
  23,675
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(immunodef_any) min(0) max(1) missing 
  167,554
  165,357
  143,879
  142,031
  23,675
  23,326
  0
  0
  167,554
  2,197
  143,879
  1,848
  23,675
  349
  0
  0
  167,554
  0
  143,879
  0
  23,675
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(flu_vaccine) min(0) max(1) missing 
  167,554
  58,895
  143,879
  52,371
  23,675
  6,524
  0
  0
  167,554
  108,659
  143,879
  91,508
  23,675
  17,151
  0
  0
  167,554
  0
  143,879
  0
  23,675
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(pneumococcal_vaccine) min(0) max(1) missing 
  167,554
  138,214
  143,879
  120,071
  23,675
  18,143
  0
  0
  167,554
  29,340
  143,879
  23,808
  23,675
  5,532
  0
  0
  167,554
  0
  143,879
  0
  23,675
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(gp_consult) min(0) max(1) missing 
  167,554
  6,914
  143,879
  6,533
  23,675
  381
  0
  0
  167,554
  160,640
  143,879
  137,346
  23,675
  23,294
  0
  0
  167,554
  0
  143,879
  0
  23,675
  0
  0
  0

. file write tablecontent _n 

. 
. summarizevariable, variable(gp_consult_count)

. file write tablecontent _n 

. 
. file write tablecontent _n _n

. 
. ** TREATMENT VARIABLES (binary)
. foreach treat of varlist        hcq                     ///
>                                                         dmard_pc             
>    ///
>                                                         azith                
>    ///
>                                                         oral_prednisolone ///
>                                                         nsaids               
>    ///
>                                                         hcq_sa               
>    ///
>                                                         dmard_pc_sa     ///
>                                                         /********************
> ************************************   TO DO: ADD BIOLOGICS WHEN AVAILABLE***
> ***/ ///
>                                                 {               
  2. 
. local lab: variable label `treat'
  3. file write tablecontent ("`lab'") _n 
  4.         
. generaterow, variable(`treat') condition("==0")
  5. generaterow, variable(`treat') condition("==1")
  6. generaterow, variable(`treat') condition("==.")
  7. 
. file write tablecontent _n
  8. 
. }
  167,554
  143,879
  143,879
  143,879
  23,675
  0
  0
  0
  167,554
  23,675
  143,879
  0
  23,675
  23,675
  0
  0
  167,554
  0
  143,879
  0
  23,675
  0
  0
  0
  167,554
  99,209
  143,879
  89,595
  23,675
  9,614
  0
  0
  167,554
  68,345
  143,879
  54,284
  23,675
  14,061
  0
  0
  167,554
  0
  143,879
  0
  23,675
  0
  0
  0
  167,554
  166,705
  143,879
  143,189
  23,675
  23,516
  0
  0
  167,554
  849
  143,879
  690
  23,675
  159
  0
  0
  167,554
  0
  143,879
  0
  23,675
  0
  0
  0
  167,554
  138,765
  143,879
  119,968
  23,675
  18,797
  0
  0
  167,554
  28,789
  143,879
  23,911
  23,675
  4,878
  0
  0
  167,554
  0
  143,879
  0
  23,675
  0
  0
  0
  167,554
  137,026
  143,879
  118,894
  23,675
  18,132
  0
  0
  167,554
  30,528
  143,879
  24,985
  23,675
  5,543
  0
  0
  167,554
  0
  143,879
  0
  23,675
  0
  0
  0
  167,554
  143,916
  143,879
  142,857
  23,675
  1,059
  0
  0
  167,554
  23,638
  143,879
  1,022
  23,675
  22,616
  0
  0
  167,554
  0
  143,879
  0
  23,675
  0
  0
  0
  167,554
  99,543
  143,879
  89,794
  23,675
  9,749
  0
  0
  167,554
  68,011
  143,879
  54,085
  23,675
  13,926
  0
  0
  167,554
  0
  143,879
  0
  23,675
  0
  0
  0

. 
. 
. file close tablecontent

. restore

. 
. 
. 
. 
. 
. /* INVOKE PROGRAMS FOR TABLE 1 (SLE only)====================================
> ====*/ 
. 
. preserve 

. keep if population == 1
(167,554 observations deleted)

. 
. *Set up output file
. cap file close tablecontent

. file open tablecontent using $Tabfigdir/table1_sle.txt, write text replace

. 
. file write tablecontent ("Table 1: Demographic and Clinical Characteristics, 
> SLE population") _n

. 
. * Exposure labelled columns
. 
. local lab0: label exposure 0

. local lab1: label exposure 1

. local labu: label exposure .u

. 
. 
. file write tablecontent _tab ("Total")                                       
>              _tab ///
>                                                          ("`lab0'")          
>                                          _tab ///
>                                                          ("`lab1'")          
>                                      _tab ///
>                                                          ("`labu'")          
>                                              _n 

. 
. * DEMOGRAPHICS (more than one level, potentially missing) 
. drop cons

. gen byte cons=1

. tabulatevariable, variable(cons) min(1) max(1) 
  26,732
  26,732
  19,895
  19,895
  6,837
  6,837
  0
  0

. file write tablecontent _n 

. 
. /* POPULATION */
. tabulatevariable, variable(population) min(0) max(1) 
  26,732
  0
  19,895
  0
  6,837
  0
  0
  0
  26,732
  26,732
  19,895
  19,895
  6,837
  6,837
  0
  0

. file write tablecontent _n 

. 
. /* SOCIO-DEMOGRAPHICS */
. tabulatevariable, variable(agegroup) min(1) max(6) 
  26,732
  3,618
  19,895
  2,473
  6,837
  1,145
  0
  0
  26,732
  4,324
  19,895
  3,005
  6,837
  1,319
  0
  0
  26,732
  6,155
  19,895
  4,423
  6,837
  1,732
  0
  0
  26,732
  5,662
  19,895
  4,261
  6,837
  1,401
  0
  0
  26,732
  4,742
  19,895
  3,809
  6,837
  933
  0
  0
  26,732
  2,231
  19,895
  1,924
  6,837
  307
  0
  0

. file write tablecontent _n 

. 
. summarizevariable, variable(age)

. file write tablecontent _n 

. 
. tabulatevariable, variable(male) min(0) max(1) 
  26,732
  22,006
  19,895
  15,849
  6,837
  6,157
  0
  0
  26,732
  4,726
  19,895
  4,046
  6,837
  680
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(ethnicity) min(1) max(5) missing 
  26,732
  16,808
  19,895
  12,605
  6,837
  4,203
  0
  0
  26,732
  1,984
  19,895
  1,419
  6,837
  565
  0
  0
  26,732
  1,013
  19,895
  735
  6,837
  278
  0
  0
  26,732
  402
  19,895
  284
  6,837
  118
  0
  0
  26,732
  481
  19,895
  338
  6,837
  143
  0
  0
  26,732
  6,044
  19,895
  4,514
  6,837
  1,530
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(imd) min(1) max(5) missing
  26,732
  5,521
  19,895
  4,160
  6,837
  1,361
  0
  0
  26,732
  5,504
  19,895
  4,143
  6,837
  1,361
  0
  0
  26,732
  5,238
  19,895
  3,942
  6,837
  1,296
  0
  0
  26,732
  5,160
  19,895
  3,785
  6,837
  1,375
  0
  0
  26,732
  5,309
  19,895
  3,865
  6,837
  1,444
  0
  0
  26,732
  0
  19,895
  0
  6,837
  0
  0
  0

. file write tablecontent _n 

. 
. // tabulatevariable, variable(residence_type) min(1) max(8) missing 
. // file write tablecontent _n 
. 
. tabulatevariable, variable(urban) min(0) max(1) missing 
  26,732
  6,048
  19,895
  4,457
  6,837
  1,591
  0
  0
  26,732
  20,684
  19,895
  15,438
  6,837
  5,246
  0
  0
  26,732
  0
  19,895
  0
  6,837
  0
  0
  0

. file write tablecontent _n 

. 
. /* HEALTH BEHAVIOURS */
. tabulatevariable, variable(bmicat) min(1) max(6) missing
  26,732
  659
  19,895
  494
  6,837
  165
  0
  0
  26,732
  8,810
  19,895
  6,616
  6,837
  2,194
  0
  0
  26,732
  7,699
  19,895
  5,848
  6,837
  1,851
  0
  0
  26,732
  4,220
  19,895
  3,024
  6,837
  1,196
  0
  0
  26,732
  1,833
  19,895
  1,268
  6,837
  565
  0
  0
  26,732
  955
  19,895
  637
  6,837
  318
  0
  0
  26,732
  2,556
  19,895
  2,008
  6,837
  548
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(obese4cat) min(1) max(4) missing
  26,732
  19,724
  19,895
  14,966
  6,837
  4,758
  0
  0
  26,732
  4,220
  19,895
  3,024
  6,837
  1,196
  0
  0
  26,732
  1,833
  19,895
  1,268
  6,837
  565
  0
  0
  26,732
  955
  19,895
  637
  6,837
  318
  0
  0
  26,732
  0
  19,895
  0
  6,837
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(smoke) min(1) max(3) missing 
  26,732
  11,103
  19,895
  8,055
  6,837
  3,048
  0
  0
  26,732
  11,114
  19,895
  8,356
  6,837
  2,758
  0
  0
  26,732
  4,384
  19,895
  3,379
  6,837
  1,005
  0
  0
  26,732
  131
  19,895
  105
  6,837
  26
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(smoke_nomiss) min(1) max(3) missing 
  26,732
  11,234
  19,895
  8,160
  6,837
  3,074
  0
  0
  26,732
  11,114
  19,895
  8,356
  6,837
  2,758
  0
  0
  26,732
  4,384
  19,895
  3,379
  6,837
  1,005
  0
  0
  26,732
  0
  19,895
  0
  6,837
  0
  0
  0

. file write tablecontent _n 

. 
. /* COMORBIDITY */
. tabulatevariable, variable(diabcat) min(1) max(4) missing
  26,732
  23,112
  19,895
  17,049
  6,837
  6,063
  0
  0
  26,732
  2,676
  19,895
  2,094
  6,837
  582
  0
  0
  26,732
  867
  19,895
  702
  6,837
  165
  0
  0
  26,732
  77
  19,895
  50
  6,837
  27
  0
  0
  26,732
  0
  19,895
  0
  6,837
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(egfr_cat) min(1) max(3) missing 
  26,732
  14,743
  19,895
  10,135
  6,837
  4,608
  0
  0
  26,732
  2,419
  19,895
  1,876
  6,837
  543
  0
  0
  26,732
  303
  19,895
  238
  6,837
  65
  0
  0
  26,732
  9,267
  19,895
  7,646
  6,837
  1,621
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(egfr_cat_nomiss) min(1) max(3) missing 
  26,732
  24,010
  19,895
  17,781
  6,837
  6,229
  0
  0
  26,732
  2,419
  19,895
  1,876
  6,837
  543
  0
  0
  26,732
  303
  19,895
  238
  6,837
  65
  0
  0
  26,732
  0
  19,895
  0
  6,837
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(chronic_cardiac_disease) min(0) max(1) missing 
  26,732
  23,377
  19,895
  17,313
  6,837
  6,064
  0
  0
  26,732
  3,355
  19,895
  2,582
  6,837
  773
  0
  0
  26,732
  0
  19,895
  0
  6,837
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(chronic_liver_disease) min(0) max(1) missing 
  26,732
  26,127
  19,895
  19,457
  6,837
  6,670
  0
  0
  26,732
  605
  19,895
  438
  6,837
  167
  0
  0
  26,732
  0
  19,895
  0
  6,837
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(resp_excl_asthma) min(0) max(1) missing 
  26,732
  23,977
  19,895
  17,819
  6,837
  6,158
  0
  0
  26,732
  2,755
  19,895
  2,076
  6,837
  679
  0
  0
  26,732
  0
  19,895
  0
  6,837
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(neuro_conditions) min(0) max(1) missing 
  26,732
  24,911
  19,895
  18,539
  6,837
  6,372
  0
  0
  26,732
  1,821
  19,895
  1,356
  6,837
  465
  0
  0
  26,732
  0
  19,895
  0
  6,837
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(hypertension) min(0) max(1) missing 
  26,732
  17,204
  19,895
  12,742
  6,837
  4,462
  0
  0
  26,732
  9,528
  19,895
  7,153
  6,837
  2,375
  0
  0
  26,732
  0
  19,895
  0
  6,837
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(diabetes) min(0) max(1) missing 
  26,732
  23,112
  19,895
  17,049
  6,837
  6,063
  0
  0
  26,732
  3,620
  19,895
  2,846
  6,837
  774
  0
  0
  26,732
  0
  19,895
  0
  6,837
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(cancer_ever) min(0) max(1) missing 
  26,732
  24,310
  19,895
  17,991
  6,837
  6,319
  0
  0
  26,732
  2,422
  19,895
  1,904
  6,837
  518
  0
  0
  26,732
  0
  19,895
  0
  6,837
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(immunodef_any) min(0) max(1) missing 
  26,732
  25,963
  19,895
  19,347
  6,837
  6,616
  0
  0
  26,732
  769
  19,895
  548
  6,837
  221
  0
  0
  26,732
  0
  19,895
  0
  6,837
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(flu_vaccine) min(0) max(1) missing 
  26,732
  13,335
  19,895
  10,492
  6,837
  2,843
  0
  0
  26,732
  13,397
  19,895
  9,403
  6,837
  3,994
  0
  0
  26,732
  0
  19,895
  0
  6,837
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(pneumococcal_vaccine) min(0) max(1) missing 
  26,732
  23,063
  19,895
  17,441
  6,837
  5,622
  0
  0
  26,732
  3,669
  19,895
  2,454
  6,837
  1,215
  0
  0
  26,732
  0
  19,895
  0
  6,837
  0
  0
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(gp_consult) min(0) max(1) missing 
  26,732
  1,862
  19,895
  1,712
  6,837
  150
  0
  0
  26,732
  24,870
  19,895
  18,183
  6,837
  6,687
  0
  0
  26,732
  0
  19,895
  0
  6,837
  0
  0
  0

. file write tablecontent _n 

. 
. summarizevariable, variable(gp_consult_count)

. file write tablecontent _n 

. 
. file write tablecontent _n _n

. 
. ** TREATMENT VARIABLES (binary)
. foreach treat of varlist        hcq                     ///
>                                                         dmard_pc             
>    ///
>                                                         azith                
>    ///
>                                                         oral_prednisolone ///
>                                                         nsaids               
>    ///
>                                                         hcq_sa               
>    ///
>                                                         dmard_pc_sa     ///
>                                                         /********************
> ************************************   TO DO: ADD BIOLOGICS WHEN AVAILABLE***
> ***/ ///
>                                                 {               
  2. 
. local lab: variable label `treat'
  3. file write tablecontent ("`lab'") _n 
  4.         
. generaterow, variable(`treat') condition("==0")
  5. generaterow, variable(`treat') condition("==1")
  6. generaterow, variable(`treat') condition("==.")
  7. 
. file write tablecontent _n
  8. 
. }
  26,732
  19,895
  19,895
  19,895
  6,837
  0
  0
  0
  26,732
  6,837
  19,895
  0
  6,837
  6,837
  0
  0
  26,732
  0
  19,895
  0
  6,837
  0
  0
  0
  26,732
  23,705
  19,895
  18,519
  6,837
  5,186
  0
  0
  26,732
  3,027
  19,895
  1,376
  6,837
  1,651
  0
  0
  26,732
  0
  19,895
  0
  6,837
  0
  0
  0
  26,732
  26,634
  19,895
  19,835
  6,837
  6,799
  0
  0
  26,732
  98
  19,895
  60
  6,837
  38
  0
  0
  26,732
  0
  19,895
  0
  6,837
  0
  0
  0
  26,732
  21,920
  19,895
  17,074
  6,837
  4,846
  0
  0
  26,732
  4,812
  19,895
  2,821
  6,837
  1,991
  0
  0
  26,732
  0
  19,895
  0
  6,837
  0
  0
  0
  26,732
  23,989
  19,895
  18,254
  6,837
  5,735
  0
  0
  26,732
  2,743
  19,895
  1,641
  6,837
  1,102
  0
  0
  26,732
  0
  19,895
  0
  6,837
  0
  0
  0
  26,732
  19,731
  19,895
  19,445
  6,837
  286
  0
  0
  26,732
  7,001
  19,895
  450
  6,837
  6,551
  0
  0
  26,732
  0
  19,895
  0
  6,837
  0
  0
  0
  26,732
  23,653
  19,895
  18,458
  6,837
  5,195
  0
  0
  26,732
  3,079
  19,895
  1,437
  6,837
  1,642
  0
  0
  26,732
  0
  19,895
  0
  6,837
  0
  0
  0

. 
. 
. file close tablecontent

. restore

. 
. * Close log file 
. log close
      name:  <unnamed>
       log:  E:\analyses\hydroxychloroquine-research/output/log\04_an_descripti
> ve_table.log
  log type:  text
 closed on:  21 Jul 2020, 14:33:16
-------------------------------------------------------------------------------
